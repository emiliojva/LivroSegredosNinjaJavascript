<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="pt-br" lang="pt-br">
    <head> 
        <title>Livro JavaScript do Maujor</title>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
        <link href="../estilos/main.css" rel="stylesheet" type="text/css" media="all" />
        <!-- code highlighter -->
        <link type="text/css" rel="stylesheet" href="../estilos/shCore.css" />
        <link type="text/css" rel="stylesheet" href="../estilos/shThemeDefault.css" />
        <style type="text/css" media="all">
            #cmenu li {
                cursor:pointer;
            }
        </style>
        <script type="text/javascript" src="../scripts/shCore.js"></script>
        <script type="text/javascript" src="../scripts/shBrushJScript.js"></script>
        <script type="text/javascript" src="../scripts/shBrushCss.js"></script>
        <script type="text/javascript" src="../scripts/shBrushPhp.js"></script>
        <script type="text/javascript" src="../scripts/shBrushPlain.js"></script>
        <script type="text/javascript" src="../scripts/shBrushXml.js"></script>
        <script type="text/javascript">SyntaxHighlighter.config.clipboardSwf = "../scripts/clipboard.swf";
            SyntaxHighlighter.all();</script> 
        <!-- fim code highlighter -->
        <script type="text/javascript">
            // <![CDATA[
            var EventUtil = {
                addHandler: function(element, type, handler) {
                    if (element.addEventListener) {
                        element.addEventListener(type, handler, false);
                    } else if (element.attachEvent) {
                        element.attachEvent("on" + type, handler);
                    } else {
                        element["on" + type] = handler;
                    }
                },
                getEvent: function(event) {
                    return event ? event : window.event;
                },
                getTarget: function(event) {
                    return event.target || event.srcElement;
                }
            }
            window.onload = function() {
                var cmenu = document.getElementById("cmenu");
                EventUtil.addHandler(cmenu, "click", function(event) {
                    event = EventUtil.getEvent(event);
                    alvo = EventUtil.getTarget(event);
                    console.dir(alvo)
                    switch (alvo.id) {
                        case "fonte":
                            cmenu.style.cssText = "font-size:20px";
                            break;
                        case "contraste":
                            cmenu.style.cssText = "background:black;color:white;";
                            break;
                        case "cor":
                            cmenu.style.cssText  = "color:red";
                            break;
                        case "largura":
                            cmenu.style.width = "300px";
                            break;
                        case "default":
                            cmenu.style.cssText = "background:none;color:none;fontSize:none;width:none;";
                            break;
                    }
                });
            }
            // ]]>
        </script>
    </head>
    <body>
        <div id="tudo">
            <h1>Capítulo 16</h1>
            <h2>Eventos - Delegação de evento</h2>
            <h3>JavaScript</h3>
            <pre class="brush: javascript">
&lt;script type="text/javascript">
var EventUtil = {
	addHandler: function() {...},
	getEvent: function(event) {...},
	getTarget: function() {...}
}
window.onload = function() {
var cmenu = document.getElementById("cmenu");
EventUtil.addHandler(cmenu, "click", function(event) {
	event = EventUtil.getEvent(event);
	alvo = EventUtil.getTarget(event)
		switch(alvo.id) {
			case "fonte":
				cmenu.style.fontSize = "20px";
				break;
			case "contraste":
				cmenu.style.cssText = "background:black;color:white;"
				break;
			case "cor":
				cmenu.style.color = "red";
				break;
			case "largura":
				cmenu.style.width = "300px";
				break;
			case "default":
				cmenu.style.cssText = "background:none;color:none;fontSize:none;width:none;"
				break;
		}
});
}
&lt;/script>
            </pre>
            <h3>HTML</h3>
            <pre class="brush: html">
...
&lt;ul id="cmenu">
	&lt;li id="fonte">Aumentar tamanho da fonte&lt;/li>
	&lt;li id="contraste">Aumentar contraste&lt;/li>
	&lt;li id="cor">Mudar a cor&lt;/li>
	&lt;li id="largura">Largura 300px&lt;/li>
	&lt;li id="default">Estilos default&lt;/li>
&lt;/ul>
...
            </pre>	
            <hr />
            <ul id="cmenu">
                <li id="fonte">Aumentar tamanho da fonte</li>
                <li id="contraste">Aumentar contraste</li>
                <li id="cor">Mudar a cor</li>
                <li id="largura">Largura 300px</li>
                <li id="default">Estilos default</li>
            </ul>
            <p class="nav-arq" id="referencia">Arquivos exemplo: <a href="C16-dommousescroll.html">&laquo; anterior</a> | <a href="../cap_17/C17-disabled.html">capítulo 17 &raquo;</a></p>
        </div>
    </body>
</html>